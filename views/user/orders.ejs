<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/styles/style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.6.0/fonts/remixicon.css" rel="stylesheet"> 
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.1/dist/sweetalert2.min.css" rel="stylesheet">
    <!-- ajax and easy invoice cdns -->
    <script src="https://cdn.jsdelivr.net/npm/easyinvoice/dist/easyinvoice.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<style>
     #nav{
      z-index: 999;
      height: 90px;
    }
    @media (max-width:640px) {
      #nav{
        height: 70px;
      }
    }
    .navbar-menu{
      z-index: 999;
    }
   
    @media (max-width:768px) {
        .cancel-btn-1{
          display: none;
        }
        .cancel-btn-2{
          display: block;
        }
    }
    @media (max-width:768px) {
      
    }
</style>
<body class="bg-indigo-300">
    
    
  <nav id="nav" class="relative sticky top-0 left-0 px-4 sm:py-4 flex justify-between items-center bg-slate-900 shadow-lg ">
		<a class="xl:text-3xl lg:text-2xl md:text-2xl text-2xl font-bold leading-none"
         href="/home">
        <h3 id="minishop" class="h-10 text-white"  alt="logo" viewBox="0 0 100 100">
            Minishop
        </h3>
                
      </a>
            <div class="sm:hidden flex">
        
        <button class="navbar-burger flex items-center text-white p-3">
                    <svg class="block h-4 w-4 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <a class="hidden sm:inline-block px-3 hover:bg-blue-600 text-sm text-white font-bold rounded-xl transition duration-200"
            href="/home/bag">
                <i class="ri-handbag-fill ri-lg"></i>
            </a>
                        <!-- <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path> -->
                    </svg>
                </button>
                <button class="navbar-burger flex items-center text-blue-600 p-3">
                    <svg class="block h-4 w-4 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <title>Mobile menu</title>
                        <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
                    </svg>
                </button>
            </div>
            <ul class="hidden absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 sm:flex sm:mx-auto sm:flex sm:items-center sm:w-auto lg:space-x-6 ">
                
                
                <li><a class="text-sm text-blue-600 font-bold" href="/home/men">Men</a></li>
                <li class="text-gray-300">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" class="w-4 h-4 current-fill" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v0m0 7v0m0 7v0m0-13a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                    </svg>
                </li>
                <li><a class="text-sm text-blue-600 hover:text-gray-500 font-bold" href="/home/women">Women</a></li>
                
                
            </ul>

            <!-- <a class="hidden sm:inline-block sm:ml-auto  bg-gray-50 hover:bg-gray-100 text-sm text-gray-900 font-bold  rounded-xl transition duration-200" href="#">  
        <i class="ri-user-fill" style="color: rgb(0, 0, 0);"></i> 
        </a> -->
        <a class="hidden sm:inline-block sm:ml-auto px-3  hover:bg-blue-600 text-sm text-gray-900 font-bold  rounded-xl transition duration-200" href="/home/wishlist">
        <i class="ri-heart-2-fill ri-lg" style="color: white;"></i>
        </a>


            <a class="hidden sm:inline-block px-3 hover:bg-blue-600 text-sm text-white font-bold rounded-xl transition duration-200" href="/home/bag">
        <i class="ri-handbag-fill ri-lg"></i>
        </a>

        <% if(user !== null ){ %>

            <a class="hidden sm:inline-block px-3 hover:bg-blue-600 text-sm text-white font-bold rounded-xl transition duration-200"
             href="/home/account">
              <i class="ri-user-fill ri-lg" style="color: rgb(7, 11, 255);"></i>
            </a>
      
          <% } %>

        </nav>
	<div class="navbar-menu relative z-50 hidden transition-transform ease-in-out duration-300">
		<div class="navbar-backdrop fixed inset-0 bg-gray-800 opacity-25"></div>
		<nav class="fixed top-0 left-0 bottom-0 flex flex-col w-5/6 max-w-sm py-6 px-6 bg-white border-r overflow-y-auto ">
			<div class="flex items-center mb-8">
				<a class="mr-auto text-3xl font-bold leading-none" href="#">
					<svg class="h-12" alt="logo" viewBox="0 0 100 100">
						<path d="M100 34.2c-.4-2.6-3.3-4-5.3-5.3-3.6-2.4-7.1-4.7-10.7-7.1-8.5-5.7-17.1-11.4-25.6-17.1-2-1.3-4-2.7-6-4-1.4-1-3.3-1-4.8 0-5.7 3.8-11.5 7.7-17.2 11.5L5.2 29C3 30.4.1 31.8 0 34.8c-.1 3.3 0 6.7 0 10v16c0 2.9-.6 6.3 2.1 8.1 6.4 4.4 12.9 8.6 19.4 12.9 8 5.3 16 10.7 24 16 2.2 1.5 4.4 3.1 7.1 1.3 2.3-1.5 4.5-3 6.8-4.5 8.9-5.9 17.8-11.9 26.7-17.8l9.9-6.6c.6-.4 1.3-.8 1.9-1.3 1.4-1 2-2.4 2-4.1V37.3c.1-1.1.2-2.1.1-3.1 0-.1 0 .2 0 0zM54.3 12.3L88 34.8 73 44.9 54.3 32.4V12.3zm-8.6 0v20L27.1 44.8 12 34.8l33.7-22.5zM8.6 42.8L19.3 50 8.6 57.2V42.8zm37.1 44.9L12 65.2l15-10.1 18.6 12.5v20.1zM50 60.2L34.8 50 50 39.8 65.2 50 50 60.2zm4.3 27.5v-20l18.6-12.5 15 10.1-33.6 22.4zm37.1-30.5L80.7 50l10.8-7.2-.1 14.4z"></path>
					</svg>
				</a>
				<button class="navbar-close">
					<svg class="h-6 w-6 text-gray-400 cursor-pointer hover:text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
					</svg>
				</button>
			</div>
			<div>
				<ul>
					<li class="mb-1">
						<a class="block p-4 text-sm font-semibold text-gray-400 hover:bg-blue-50 hover:text-blue-600 rounded" href="/home/products/men">Men</a>
					</li>
					<li class="mb-1">
						<a class="block p-4 text-sm font-semibold text-gray-400 hover:bg-blue-50 hover:text-blue-600 rounded" href="/home/products/women">Women</a>
					</li>
					  
					<li class="mb-1">
						<a class="block p-4 text-sm font-semibold text-gray-400 hover:bg-blue-50 hover:text-blue-600 rounded" href="/home/wishlit">wishlist</a>
					</li>
				</ul>
			</div>
			<div class="mt-auto">
				<div class="pt-6">
          
					<a class="block px-4 py-3 mb-3 leading-loose text-xs text-center font-semibold leading-none bg-gray-50 hover:bg-gray-100 rounded-xl" href="#">Sign in</a>
					<a class="block px-4 py-3 mb-2 leading-loose text-xs text-center text-white font-semibold bg-blue-600 hover:bg-blue-700  rounded-xl" href="#">Sign Up</a>
				</div>
				<p class="my-4 text-xs text-center text-gray-400">
					<span id="date">  </span>
				</p>
			</div>
		</nav>
	</div>


    <!-- side navbar -->
    <button data-drawer-target="default-sidebar" data-drawer-toggle="default-sidebar" aria-controls="default-sidebar" type="button" class="inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600">
        <span class="sr-only">Open sidebar</span>
        <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
        </svg>
     </button>
     
     <aside id="default-sidebar" class="fixed top-18 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0" aria-label="Sidebar">
        <div class="h-full px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-gray-800">
           <ul class="space-y-2 font-medium">
              <!-- <li>
                 <a href="#" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <svg class="w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 21">
                       <path d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"/>
                       <path d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"/>
                    </svg>
                    <span class="ms-3">Dashboard</span>
                 </a>
              </li> -->
              <li>
                 <a href="/home/account/addresses" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <!-- <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 18">
                       <path d="M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z"/>
                    </svg> -->
                    <span class="flex-1 ms-3 whitespace-nowrap">Addresses</span>
                    <span class="inline-flex items-center justify-center px-2 ms-3 text-sm font-medium text-gray-800 bg-gray-100 rounded-full dark:bg-gray-700 dark:text-gray-300">Pro</span>
                 </a>
              </li>
              <li>
                 <a href="/home/account/orders" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <!-- <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                       <path d="m17.418 3.623-.018-.008a6.713 6.713 0 0 0-2.4-.569V2h1a1 1 0 1 0 0-2h-2a1 1 0 0 0-1 1v2H9.89A6.977 6.977 0 0 1 12 8v5h-2V8A5 5 0 1 0 0 8v6a1 1 0 0 0 1 1h8v4a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-4h6a1 1 0 0 0 1-1V8a5 5 0 0 0-2.582-4.377ZM6 12H4a1 1 0 0 1 0-2h2a1 1 0 0 1 0 2Z"/>
                    </svg> -->
                    <span class="flex-1 ms-3 whitespace-nowrap">Orders</span>
                    <!-- <span class="inline-flex items-center justify-center w-3 h-3 p-3 ms-3 text-sm font-medium text-blue-800 bg-blue-100 rounded-full dark:bg-blue-900 dark:text-blue-300">3</span> -->
                 </a>
              </li>
              <li>
                <a href="/home/account/wallet" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                   <!-- <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 18">
                      <path d="M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z"/>
                   </svg> -->
                   <span class="flex-1 ms-3 whitespace-nowrap">Wallet</span>
                </a>
             </li>
             <li>
              <a href="/home/account/reffer" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                 <!-- <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 18">
                    <path d="M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z"/>
                 </svg> -->
                 <span class="flex-1 ms-3 whitespace-nowrap">reffer and earn</span>
              </a>
           </li>
              <li>
                 <a href="/home/signout" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <!-- <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 18">
                       <path d="M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z"/>
                    </svg> -->
                    <span class="flex-1 ms-3 whitespace-nowrap">Sign out</span>
                 </a>
              </li>
              <!-- <li>
                 <a href="#" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 16">
                       <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3"/>
                    </svg>
                    <span class="flex-1 ms-3 whitespace-nowrap">Sign out</span>
                 </a>
              </li> -->
           </ul>
        </div>
        
     </aside>


     
  <div id="downloading" style="z-index: 999; left: 60%; top: 50%; transform: translate(-50%,-50%); display: none;" class="absolute">
   
      <div role="status" class="text-center bg-slate-900 px-14 py-10 rounded">
       
          <svg aria-hidden="true" class="inline w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
            
              <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"/>
              <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"/>
          </svg>
          <p class="text-white font-bold">
            downloading
            <span id="downloadTimer"></span>
          </p>
          
      </div>
  </div>


     <!-- listing the orders -->
     <div class="py-14 px-4 md:px-6 2xl:px-20 2xl:container 2xl:mx-auto sm:ml-64">
        <!--- more free and premium Tailwind CSS components at https://tailwinduikit.com/ --->
      
        <div class="flex justify-start item-start space-y-2 flex-col">
          <h1 class="text-3xl  lg:text-4xl font-semibold leading-7 lg:leading-9 ">Order</h1>
        </div>
        <div class="mt-10 flex flex-col xl:flex-row jusitfy-center items-stretch w-full xl:space-x-8 space-y-4 md:space-y-6 xl:space-y-0">
          <div class="flex flex-col justify-start items-start w-full space-y-4 md:space-y-6 xl:space-y-8">
            <div class="flex flex-col justify-start items-start  bg-white px-4 py-4 md:py-6 md:p-6 xl:p-8 w-full">
              <p class="text-lg md:text-xl  font-semibold leading-6 xl:leading-5 text-gray-800">Order details</p>
              <% order.forEach((products) => { %>
              
                        <div class="mt-4 md:mt-6 flex flex-col md:flex-row justify-start items-start md:items-center md:space-x-6 xl:space-x-8 w-full">
                <div class="pb-4 md:pb-8 w-full md:w-40">
                  <a href="/home/account/orders/<%=products.productDetails._id%>?order=<%=products._id%>">
                    <img class="w-full  hidden md:block" src="/images/product/<%=products.productDetails.images[0]%>" alt="dress" />
                    <img class="w-full md:hidden" src="https://i.ibb.co/L039qbN/Rectangle-10.png" alt="dress" />
                  </a>
                </div>
                <div class="border-b border-slate-900 md:flex-row flex-col flex justify-between items-start w-full pb-8 space-y-4 md:space-y-0">
                  <div class="w-full flex flex-col justify-start items-start space-y-8">
                    <h3 class="text-xl  xl:text-2xl font-semibold leading-6 text-gray-800"><%=products.productDetails.productname%></h3>
                    <div class="flex justify-start items-start flex-col space-y-2">
                      <p class="text-sm  leading-none text-gray-800"><span class=" text-gray-800">offer(percentage): </span><%=products.orderItems.offer%></p>
                      <p class="text-sm  leading-none text-gray-800"><span class=" text-gray-800">payment-method: </span><%=products.paymentMethod%></p>
                      <p class="text-sm  leading-none text-gray-800"><span class=" text-gray-800">Price: </span> &#x20B9;
                        <%=products.orderItems.productPrice%> </p>
                      <p class="text-sm  leading-none text-gray-800"><span class=" text-gray-800">Date: </span>
                          <%=products.orderDate.getDate()%>/<%=products.orderDate.getMonth()%>/<%=products.orderDate.getFullYear()%>
                        <!-- showin time -->
                         (
                         
                          <% if(products.orderDate.getHours() > 12){ %>
                            <%=products.orderDate.getHours()%>:<%=products.orderDate.getMinutes()%>:PM
                          <% }else{ %>
                            <%=products.orderDate.getHours()%>:<%=products.orderDate.getMinutes()%>:AM
                          <% } %>
                        )
                        </p>

                    </div>
                  </div>
                  <div class="flex justify-between space-x-8 items-start w-full h-full">
                    <p class="text-base font-bold leading-6">status:<span class="text-stone-950 font-bold"> <%=products.orderItems.orderStatus%> </span></p>
                    <p class="text-base  xl:text-lg leading-6 text-gray-800"> <%=products.orderItems.quantity%> </p>
                    <p class="text-base  xl:text-lg font-semibold leading-6 text-gray-800"> &#8377; <%=products.price%>  </p>
                    <div class="flex flex-wrap gap-2">
                    <% if(products.orderItems.orderStatus === 'cancelled'){ %>
                      <form action="" method="post">
                        <button  type="submit"
                        class="text-white bg-red-700 hover:bg-red-800 focus:outline-none  focus:ring-red-300 font-medium rounded-full text-sm px-5 py-1 text-center  dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
                          cancelled
                        </button>
                      </form>
                    <% }else if(products.orderItems.orderStatus !== 'delivered'  ){ %>

                      <form class="cancel-order-form" method="post" action="/home/account/orders/<%=products.orderItems.productId%>/<%=products._id%>">
                        <input type="text" name="quantity" value="<%=products.orderItems.quantity%>" style="display: none;">
                        <button  type="submit"
                        class="cancel-btn-1 text-white bg-red-700 hover:bg-red-800 focus:outline-none  focus:ring-red-300 font-medium rounded-full text-sm px-5 py-1 text-center  dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
                          cancel
                        </button>
                      </form>
                      <!-- onclick="downloadInvoice(event)" -->
                      <form  class="invoice-form" target="_blank" action="/home/account/order-invoice/<%=products.address%>/<%= products._id%>/<%=  products.orderItems.productId %>">
                        <button  type="submit" class="invoice-btn bg-gray-700 rounded">
                          <i style="color: white;" class="ri-file-download-line ri-xl mb-5 "></i>
                        </button>
                      </form>



                   
                    <% }else{ %>
                      <form action="/home/account/orders/return" method="post">
                        <button  type="submit"
                        class="text-white bg-red-700 hover:bg-red-800 focus:outline-none  focus:ring-red-300 font-medium rounded-full text-sm px-5 py-1 text-center  dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
                          return  
                        </button>
                      </form>  
                    <% } %>
                    </div>
                    
                  </div>
                  <button  class="cancel-btn-2 hidden text-white bg-red-700 hover:bg-red-800 focus:outline-none  focus:ring-red-300 font-medium rounded-full text-sm px-5 py-1 text-center  dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
                    cancel
                  </button>
                </div>
              </div>
             
              <% }) %>
              
            
             
              
            </div>
            <!-- <div class="flex justify-center flex-col md:flex-row flex-col items-stretch w-full space-y-4 md:space-y-0 md:space-x-6 xl:space-x-8">
              <div class="flex flex-col px-4 py-6 md:p-6 xl:p-8 w-full bg-gray-50 dark:bg-gray-800 space-y-6">
                <h3 class="text-xl dark:text-white font-semibold leading-5 text-gray-800">Summary</h3>
                <div class="flex justify-center items-center w-full space-y-4 flex-col border-gray-200 border-b pb-4">
                  <div class="flex justify-between w-full">
                    <p class="text-base dark:text-white leading-4 text-gray-800">Subtotal</p>
                    <p class="text-base dark:text-gray-300 leading-4 text-gray-600">$56.00</p>
                  </div>
                  <div class="flex justify-between items-center w-full">
                    <p class="text-base dark:text-white leading-4 text-gray-800">Discount <span class="bg-gray-200 p-1 text-xs font-medium dark:bg-white dark:text-gray-800 leading-3 text-gray-800">STUDENT</span></p>
                    <p class="text-base dark:text-gray-300 leading-4 text-gray-600">-$28.00 (50%)</p>
                  </div>
                  <div class="flex justify-between items-center w-full">
                    <p class="text-base dark:text-white leading-4 text-gray-800">Shipping</p>
                    <p class="text-base dark:text-gray-300 leading-4 text-gray-600">$8.00</p>
                  </div>
                </div>
                <div class="flex justify-between items-center w-full">
                  <p class="text-base dark:text-white font-semibold leading-4 text-gray-800">Total</p>
                  <p class="text-base dark:text-gray-300 font-semibold leading-4 text-gray-600">$36.00</p>
                </div>
              </div>
              <div class="flex flex-col justify-center px-4 py-6 md:p-6 xl:p-8 w-full bg-gray-50 dark:bg-gray-800 space-y-6">
                <h3 class="text-xl dark:text-white font-semibold leading-5 text-gray-800">Shipping</h3>
                <div class="flex justify-between items-start w-full">
                  <div class="flex justify-center items-center space-x-4">
                    <div class="w-8 h-8">
                      <img class="w-full h-full" alt="logo" src="https://i.ibb.co/L8KSdNQ/image-3.png" />
                    </div>
                    <div class="flex flex-col justify-start items-center">
                      <p class="text-lg leading-6 dark:text-white font-semibold text-gray-800">DPD Delivery<br /><span class="font-normal">Delivery with 24 Hours</span></p>
                    </div>
                  </div>
                  <p class="text-lg font-semibold leading-6 dark:text-white text-gray-800">$8.00</p>
                </div>
                <div class="w-full flex justify-center items-center">
                  <button class="hover:bg-black dark:bg-white dark:text-gray-800 dark:hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800 py-5 w-96 md:w-full bg-gray-800 text-base font-medium leading-4 text-white">View Carrier Details</button>
                </div>
              </div>
            </div> -->
          </div>
          
        </div>
      </div>

      <div class="sm:ml-64 h-full">
       
    </div>


      <script src="/js/navbar.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.1/dist/sweetalert2.all.min.js"></script>

    <script>

     

      let forms = document.getElementsByClassName('cancel-order-form');
      Array.from(forms).forEach((form,index) => {
        form.addEventListener('submit',(e) => {
          e.preventDefault();
          const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
              confirmButton: "text-white bg-green-700 hover:bg-green-800 focus:outline-none  focus:ring-green-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800",
              cancelButton: "text-white bg-red-700 hover:bg-red-800 focus:outline-none  focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"
            },
            buttonsStyling: false
          });
          swalWithBootstrapButtons.fire({
            title: "Are you sure?",
            text: "Do you want to cancel the order",
            icon: "warning",
            showCancelButton: true,
            confirmButtonText: "Yes, cancel it!",
            cancelButtonText: "No, cancel!",
            reverseButtons: true
            }).then((result) => {
              if (result.isConfirmed) {
                form.submit();
              }else{
                e.preventDefault()
              }
            });
        })
      })
    
      let invoiceBtn = document.getElementsByClassName('invoice-btn')

      // Array.from(invoiceBtn).forEach((button,ind) => {
      //   button.addEventListener('click',(e) => {
      //     let address = document.getElementsByClassName('invoice-form')[ind].getAttribute('data-bs-id');
      //     console.log(address)
      //     e.preventDefault()
      //     fetch(`/home/account/order-invoice/${address}`,{
      //       method:'POST',
      //       headers: {
      //       'Content-Type': 'application/json',
      //     },
      //     })
      //       .then((response) => {
      //         if(response.ok){
      //           return response.json()
      //         }
      //         throw new Error(`Network response was not ok: ${response.statusText}`);
      //       })
      //       .then((data) => {
      //         if(data){
      //           console.log(data.order[ind].addressDetails.firstname);
      //           let timer = document.getElementById('downloading');
      //           timer.style.display = 'block';
      //           console.log(data.order)

      //           downloadInvoice(data.order[ind])
      //         }
      //       })
      //       .catch((err) => {
      //         console.log(err)
      //       })
      //   })
      // })    

 

      function downloadInvoice(response){
        let orderDate = new Date(response.orderDate);
        let formattedOrderDate = orderDate.toLocaleDateString('en-GB', { day: '2-digit', month: '2-digit', year: '2-digit' }).replace(/\//g, '-');
        console.log(formattedOrderDate);

          // let orderDate = response.orderDate.toLocaleDateString('en-GB', { day: '2-digit', month: '2-digit', year: '2-digit' }).replace(/\//g, '-')
          const data = {
            // If not using the free version, set your API key
            // "apiKey": "123abc", // Get apiKey through: https://app.budgetinvoice.com/register
            
            // Customize enables you to provide your own templates
            // Please review the documentation for instructions and examples
            "customize": {
                //  "template": fs.readFileSync('template.html', 'base64') // Must be base64 encoded html 
            },
            "images": {
                // The logo on top of your invoice
                "logo": "",
                // The invoice background
                "background": "https://public.budgetinvoice.com/img/watermark-draft.jpg"
            },
            // Your own data
            "sender": {
                "company": "Minishop",
                // "address": "Sample Street 123",
                // "zip": "1234 AB",
                // "city": "Sampletown",
                // "country": "Samplecountry"
                //"custom1": "custom value 1",
                //"custom2": "custom value 2",
                //"custom3": "custom value 3"
            },
            // Your recipient
            "client": {
                "company":"name:"+response.addressDetails.firstname,
                "address": response.addressDetails.address,
                "zip": response.addressDetails.pincode,
                "city": response.addressDetails.districtORcity,
                "country":response.addressDetails.state
                // "custom1": "custom value 1",
                // "custom2": "custom value 2",
                // "custom3": "custom value 3"
            },
            "information": {
                // Invoice data
                "date": formattedOrderDate
            },
            // The products you would like to see on your invoice
            // Total values are being calculated automatically
            "products": [
                {
                    "quantity": response.orderItems.quantity,
                    "description": response.productDetails.productname,
                    "tax-rate":0,
                    "price":response.productDetails.price,
                },
                // {
                //     "quantity": 4.1,
                //     "description": "Product 2",
                //     "tax-rate": 6,
                //     "price": 12.34
                // },
                // {
                //     "quantity": 4.5678,
                //     "description": "Product 3",
                //     "tax-rate": 21,
                //     "price": 6324.453456
                // }
            ],
            // Settings to customize your invoice
            "settings": {
                'Total':response.price,
                "currency": "INR", // See documentation 'Locales and Currency' for more info. Leave empty for no currency.
                // "locale": "nl-NL", // Defaults to en-US, used for number formatting (See documentation 'Locales and Currency')        
                // "margin-top": 25, // Defaults to '25'
                // "margin-right": 25, // Defaults to '25'
                // "margin-left": 25, // Defaults to '25'
                // "margin-bottom": 25, // Defaults to '25'
                // "format": "A4", // Defaults to A4, options: A3, A4, A5, Legal, Letter, Tabloid
                // "height": "1000px", // allowed units: mm, cm, in, px
                // "width": "500px", // allowed units: mm, cm, in, px
                // "orientation": "landscape", // portrait or landscape, defaults to portrait
            },
            // Translate your invoice to your preferred language
            "translate": {
                "invoice":'' ,  // Default to 'INVOICE'
                "number": '', // Defaults to 'Number'
                "date":'', // Default to 'Date'
                "due-date": '', // Defaults to 'Due Date'
                "subtotal":'', // Defaults to 'Subtotal'
                "products": '', // Defaults to 'Products'
                "quantity": '', // Default to 'Quantity'
                "price": '', // Defaults to 'Price'
                "product-total":'', // Defaults to 'Total'
                "total":'', // Defaults to 'Total'
                "vat":''  // Defaults to 'vat'
            },
        };

        //Create your invoice! Easy!
        easyinvoice.createInvoice(data,  function (result) {
            easyinvoice.download('invoice.pdf'); 
            setTimeout(() => {
              console.log()
            let timer = document.getElementById('downloading');
            timer.style.display = 'none';
          }, 2000); 
        });

      }

    </script>

   
</body>
</html>